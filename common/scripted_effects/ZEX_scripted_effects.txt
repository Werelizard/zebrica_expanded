##########################################
# MAREGYPT DIET RELATED SCRIPTED EFFECTS #
##########################################

ZEX_activate_parliament = {
	custom_effect_tooltip = ZEX_Activate_Parliament_tt
	hidden_effect = {
		set_country_flag = zex_has_maregypt_parliament
		ZEX_setup_royal_diet = yes
	}
}

ZEX_deactivate_parliament = {
	custom_effect_tooltip = ZEX_Deactivate_Parliament_tt
	hidden_effect = {
		clr_country_flag = zex_has_maregypt_parliament
	}
}

ZEX_setup_royal_diet = {
	add_to_variable = {
		var = zex_royal_diet_supremacy_seats
		value = party_popularity_100@fascism
	}
	add_to_variable = {
		var = zex_royal_diet_communist_seats
		value = party_popularity_100@communism
	}
	add_to_variable = {
		var = zex_royal_diet_unaligned_seats
		value = party_popularity_100@neutrality
	}
	add_to_variable = {
		var = zex_royal_diet_harmony_seats
		value = party_popularity_100@democratic
	}
	add_to_variable = {
		var = zex_royal_diet_independent_seats
		value = 300
	}
	clamp_variable = {
		var = zex_royal_diet_supremacy_seats
		min = 0
		max = 300
	}
	clamp_variable = {
		var = zex_royal_diet_communist_seats
		min = 0
		max = 300
	}
	clamp_variable = {
		var = zex_royal_diet_unaligned_seats
		min = 0
		max = 300
	}
	clamp_variable = {
		var = zex_royal_diet_harmony_seats
		min = 0
		max = 300
	}
	clamp_variable = {
		var = zex_royal_diet_independent_seats
		min = 0
		max = 300
	}
	multiply_variable = {
		var = zex_royal_diet_supremacy_seats
		value = 2.7
	}
	multiply_variable = {
		var = zex_royal_diet_communist_seats
		value = 2.7
	}
	multiply_variable = {
		var = zex_royal_diet_unaligned_seats
		value = 2.7
	}
	multiply_variable = {
		var = zex_royal_diet_harmony_seats
		value = 2.7
	}
	round_variable = zex_royal_diet_supremacy_seats
	round_variable = zex_royal_diet_communist_seats
	round_variable = zex_royal_diet_unaligned_seats
	round_variable = zex_royal_diet_harmony_seats
	subtract_from_variable = {
		var = zex_royal_diet_independent_seats
		value = zex_royal_diet_supremacy_seats
	}
	subtract_from_variable = {
		var = zex_royal_diet_independent_seats
		value = zex_royal_diet_communist_seats
	}
	subtract_from_variable = {	
		var = zex_royal_diet_independent_seats
		value = zex_royal_diet_unaligned_seats
	}
	subtract_from_variable = {
		var = zex_royal_diet_independent_seats
		value = zex_royal_diet_harmony_seats
	}
}