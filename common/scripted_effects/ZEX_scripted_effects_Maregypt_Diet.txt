##########################################
# MAREGYPT DIET RELATED SCRIPTED EFFECTS #
##########################################

# Mechanic Activation / Deactivation Effects

ZEX_activate_parliament = {
	custom_effect_tooltip = ZEX_Activate_Parliament_tt
	hidden_effect = {
		set_country_flag = zex_has_maregypt_parliament
		ZEX_setup_royal_diet = yes
	}
}

ZEX_deactivate_parliament = {
	custom_effect_tooltip = ZEX_Deactivate_Parliament_tt
	hidden_effect = {
		clr_country_flag = zex_has_maregypt_parliament
	}
}

# Mechanic Setup

ZEX_setup_royal_diet = {
	ZEX_royal_diet_initial_seats_setup = yes
	ZEX_royal_diet_calculate_total_harmony = yes
	ZEX_royal_diet_calculate_total_supremacy = yes
	ZEX_royal_diet_calculate_total_socialist = yes
	ZEX_royal_diet_calculate_total_unaligned = yes
	ZEX_royal_diet_calculate_total_independent = yes
	ZEX_Royal_Diet_Var_Set = yes
}

# Mechanic Flow Control

ZEX_Royal_Diet_Var_Set = {
	set_variable = {
		var = ZEX_royal_transfer_amount_diet_lower_bound
		value = 1
	}
	set_variable = {
		var = ZEX_royal_diet_transfer_amount_upper_bound
		value = 5
	}
}

ZEX_royal_diet_initial_seats_setup = {
	# Define Baselines
	set_variable = {
		var = zex_harmony_seats_opposition
		value = 70
	}
	set_variable = {
		var = zex_harmony_seats_support
		value = 120
	}
	set_variable = {
		var = zex_unaligned_seats_opposition
		value = 20
	}
	set_variable = {
		var = zex_unaligned_seats_support
		value = 35
	}
	set_variable = {
		var = zex_supremacy_seats_opposition
		value = 10
	}
	set_variable = {
		var = zex_supremacy_seats_support
		value = 0
	}
	set_variable = {
		var = zex_socialist_seats_opposition
		value = 5
	}
	set_variable = {
		var = zex_socialist_seats_support
		value = 0
	}
	set_variable = {
		var = zex_independent_seats_opposition
		value = 35
	}
	set_variable = {
		var = zex_independent_seats_support
		value = 5
	}
	# Define Clamps
	clamp_temp_variable = {
		var = zex_harmony_seats_opposition
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_harmony_seats_support
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_unaligned_seats_opposition
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_unaligned_seats_support
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_supremacy_seats_opposition
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_supremacy_seats_support
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_socialist_seats_opposition
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_socialist_seats_support
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_independent_seats_opposition
		min = 0
		max = 300
	}
	clamp_temp_variable = {
		var = zex_independent_seats_support
		min = 0
		max = 300
	}
}

ZEX_royal_diet_calculate_total_harmony = {
	set_variable = {
		var = zex_harmony_seats_total
		value = 0
	}
	add_to_variable = {
		var = zex_harmony_seats_total
		value = zex_harmony_seats_opposition
	}
	add_to_variable = {
		var = zex_harmony_seats_total
		value = zex_harmony_seats_support
	}
}

ZEX_royal_diet_calculate_total_unaligned = {
	set_variable = {
		var = zex_unaligned_seats_total
		value = 0
	}
	add_to_variable = {
		var = zex_unaligned_seats_total
		value = zex_unaligned_seats_opposition
	}
	add_to_variable = {
		var = zex_unaligned_seats_total
		value = zex_unaligned_seats_support
	}
}

ZEX_royal_diet_calculate_total_supremacy = {
	set_variable = {
		var = zex_supremacy_seats_total
		value = 0
	}
	add_to_variable = {
		var = zex_supremacy_seats_total
		value = zex_supremacy_seats_opposition
	}
	add_to_variable = {
		var = zex_supremacy_seats_total
		value = zex_supremacy_seats_support
	}
}

ZEX_royal_diet_calculate_total_socialist = {
	set_variable = {
		var = zex_socialist_seats_total
		value = 0
	}
	add_to_variable = {
		var = zex_socialist_seats_total
		value = zex_socialist_seats_opposition
	}
	add_to_variable = {
		var = zex_socialist_seats_total
		value = zex_socialist_seats_support
	}
}

ZEX_royal_diet_calculate_total_independent = {
	set_variable = {
		var = zex_independent_seats_total
		value = 0
	}
	add_to_variable = {
		var = zex_independent_seats_total
		value = zex_independent_seats_opposition
	}
	add_to_variable = {
		var = zex_independent_seats_total
		value = zex_independent_seats_support
	}
}

# Faction transfer representatives effects

ZEX_harmony_to_independent = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_harmony_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_harmony_seats_opposition
		}
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = zex_harmony_seats_opposition
		}
		set_variable = {
			var = zex_harmony_seats_opposition
			value = 0
		}
		#Check if there's enough left in the harmony support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_harmony_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = zex_harmony_seats_support
			}
			set_variable = {
				var = zex_harmony_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_harmony_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_harmony_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

ZEX_independent_to_harmony = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_independent_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_independent_seats_opposition
		}
		add_to_variable = {
			var = zex_harmony_seats_opposition
			value = zex_independent_seats_opposition
		}
		set_variable = {
			var = zex_independent_seats_opposition
			value = 0
		}
		#Check if there's enough left in the independent support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_independent_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_harmony_seats_opposition
				value = zex_independent_seats_support
			}
			set_variable = {
				var = zex_independent_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_harmony_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_independent_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_harmony_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

ZEX_independent_to_supremacy = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_independent_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_independent_seats_opposition
		}
		add_to_variable = {
			var = zex_supremacy_seats_opposition
			value = zex_independent_seats_opposition
		}
		set_variable = {
			var = zex_independent_seats_opposition
			value = 0
		}
		#Check if there's enough left in the independent support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_independent_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_supremacy_seats_opposition
				value = zex_independent_seats_support
			}
			set_variable = {
				var = zex_independent_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_supremacy_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_independent_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_supremacy_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

ZEX_independent_to_unaligned = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_independent_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_independent_seats_opposition
		}
		add_to_variable = {
			var = zex_unaligned_seats_opposition
			value = zex_independent_seats_opposition
		}
		set_variable = {
			var = zex_independent_seats_opposition
			value = 0
		}
		#Check if there's enough left in the independent support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_independent_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_unaligned_seats_opposition
				value = zex_independent_seats_support
			}
			set_variable = {
				var = zex_independent_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_unaligned_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_independent_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_unaligned_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

ZEX_independent_to_socialist = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_independent_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_independent_seats_opposition
		}
		add_to_variable = {
			var = zex_socialist_seats_opposition
			value = zex_independent_seats_opposition
		}
		set_variable = {
			var = zex_independent_seats_opposition
			value = 0
		}
		#Check if there's enough left in the independent support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_independent_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_socialist_seats_opposition
				value = zex_independent_seats_support
			}
			set_variable = {
				var = zex_independent_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_socialist_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_independent_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_socialist_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

ZEX_supremacy_to_independent = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_supremacy_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_supremacy_seats_opposition
		}
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = zex_supremacy_seats_opposition
		}
		set_variable = {
			var = zex_supremacy_seats_opposition
			value = 0
		}
		#Check if there's enough left in the supremacy support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_supremacy_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = zex_supremacy_seats_support
			}
			set_variable = {
				var = zex_supremacy_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_supremacy_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_supremacy_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

ZEX_unaligned_to_independent = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_unaligned_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_unaligned_seats_opposition
		}
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = zex_unaligned_seats_opposition
		}
		set_variable = {
			var = zex_unaligned_seats_opposition
			value = 0
		}
		#Check if there's enough left in the unaligned support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_unaligned_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = zex_unaligned_seats_support
			}
			set_variable = {
				var = zex_unaligned_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_unaligned_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_unaligned_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

ZEX_socialist_to_independent = {
	set_variable_to_random = {
		var = ZEX_temp_var_representatives_to_be_transfered
		min = ZEX_royal_transfer_amount_diet_lower_bound
		max = ZEX_royal_diet_transfer_amount_upper_bound
		integer = yes
	}
	if = {
		#Check if the number of senators to be transfered is greater than the source opposition
		limit = {
			check_variable = {
				var = ZEX_temp_var_representatives_to_be_transfered
				value = zex_socialist_seats_opposition
				compare = greater_than
			}
		}
		#Move the pooled opposition to the target opposition
		subtract_from_variable = {
			var = ZEX_temp_var_representatives_to_be_transfered
			value = zex_socialist_seats_opposition
		}
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = zex_socialist_seats_opposition
		}
		set_variable = {
			var = zex_socialist_seats_opposition
			value = 0
		}
		#Check if there's enough left in the socialist support
		if= {
			limit = {
				check_variable = {
					var = ZEX_temp_var_representatives_to_be_transfered
					value = zex_socialist_seats_support
					compare = greater_than
				}
			}
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = zex_socialist_seats_support
			}
			set_variable = {
				var = zex_socialist_seats_support
				value = 0
			}
		}
		else = {
			add_to_variable = {
				var = zex_independent_seats_opposition
				value = ZEX_temp_var_representatives_to_be_transfered
			}
			subtract_from_variable = {
				var = zex_socialist_seats_support
				value = ZEX_temp_var_representatives_to_be_transfered
			}
		}
	}
	else = {
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
		subtract_from_variable = {
			var = zex_socialist_seats_opposition
			value = ZEX_temp_var_representatives_to_be_transfered
		}
	}
}

# Increase/Decrease Support - Faction Specific

ZEX_harmony_increase_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_increase_amount
				value = zex_harmony_seats_opposition
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_harmony_seats_support
			value = zex_harmony_seats_opposition
		}
		set_variable = {
			var = zex_harmony_seats_opposition
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_harmony_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_harmony_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_harmony_decrease_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_decrease_amount
				value = zex_harmony_seats_support
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_harmony_seats_opposition
			value = zex_harmony_seats_support
		}
		set_variable = {
			var = zex_harmony_seats_support
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_harmony_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_harmony_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_supremacy_increase_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_increase_amount
				value = zex_supremacy_seats_opposition
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_supremacy_seats_support
			value = zex_supremacy_seats_opposition
		}
		set_variable = {
			var = zex_supremacy_seats_opposition
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_supremacy_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_supremacy_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_supremacy_decrease_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_decrease_amount
				value = zex_supremacy_seats_support
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_supremacy_seats_opposition
			value = zex_supremacy_seats_support
		}
		set_variable = {
			var = zex_supremacy_seats_support
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_supremacy_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_supremacy_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_socialist_increase_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_increase_amount
				value = zex_socialist_seats_opposition
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_socialist_seats_support
			value = zex_socialist_seats_opposition
		}
		set_variable = {
			var = zex_socialist_seats_opposition
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_socialist_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_socialist_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_socialist_decrease_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_decrease_amount
				value = zex_socialist_seats_support
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_socialist_seats_opposition
			value = zex_socialist_seats_support
		}
		set_variable = {
			var = zex_socialist_seats_support
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_socialist_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_socialist_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_unaligned_increase_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_increase_amount
				value = zex_unaligned_seats_opposition
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_unaligned_seats_support
			value = zex_unaligned_seats_opposition
		}
		set_variable = {
			var = zex_unaligned_seats_opposition
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_unaligned_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_unaligned_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_unaligned_decrease_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_decrease_amount
				value = zex_unaligned_seats_support
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_unaligned_seats_opposition
			value = zex_unaligned_seats_support
		}
		set_variable = {
			var = zex_unaligned_seats_support
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_unaligned_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_unaligned_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_independent_increase_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_increase_amount
				value = zex_independent_seats_opposition
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_independent_seats_support
			value = zex_independent_seats_opposition
		}
		set_variable = {
			var = zex_independent_seats_opposition
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_independent_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

ZEX_independent_decrease_support = {
	set_variable_to_random = {
		var = ZEX_temp_var_support_increase_amount
		min = 3
		max = 10
	}
	if = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_support_decrease_amount
				value = zex_independent_seats_support
				compare = greater_than
			}
		}
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = zex_independent_seats_support
		}
		set_variable = {
			var = zex_independent_seats_support
			value = 0
		}
	}
	else = {
		subtract_from_variable = {
			var = zex_independent_seats_support
			value = ZEX_temp_var_support_decrease_amount
		}
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = ZEX_temp_var_support_decrease_amount
		}
	}
}

# Decrease Support all

ZEX_decrease_diet_support_all = {
	set_variable = {
		var = ZEX_temp_var_opposition_increase
		value = 0
	}
	#This will try to remove 120 seats from the support, begining with the opposition
	while_loop_effect = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_opposition_increase
				value = 150
				compare = less_than
			}
			check_variable = {
				var = zex_supremacy_seats_support
				value = 0
				compare = greater_than
			}
			check_variable = {
				var = zex_socialist_seats_support
				value = 0
				compare = greater_than
			}
			check_variable = {
				var = zex_unaligned_seats_support
				value = 0
				compare = greater_than
			}
		}
		if = {
			limit = {
				check_variable = {
					var = zex_supremacy_seats_support
					value = 0
					compare = greater_than
				}
			}
			subtract_from_variable = {
				var = zex_supremacy_seats_support
				value = 1
			}
			add_to_variable = {
				var = zex_supremacy_seats_opposition
				value = 1
			}
			add_to_variable = {
				var = ZEX_temp_var_opposition_increase
				value = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					var = zex_socialist_seats_support
					value = 0
					compare = greater_than
				}
			}
			subtract_from_variable = {
				var = zex_socialist_seats_support
				value = 1
			}
			add_to_variable = {
				var = zex_socialist_seats_opposition
				value = 1
			}
			add_to_variable = {
				var = ZEX_temp_var_opposition_increase
				value = 1
			}
		}
		if = {
			limit = {
				check_variable = {
					var = zex_unaligned_seats_support
					value = 0
					compare = greater_than
				}
			}
			subtract_from_variable = {
				var = zex_unaligned_seats_support
				value = 1
			}
			add_to_variable = {
				var = zex_unaligned_seats_opposition
				value = 1
			}
			add_to_variable = {
				var = ZEX_temp_var_opposition_increase
				value = 1
			}
		}
	}
	while_loop_effect = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_opposition_increase
				value = 150
				compare = less_than
			}
			check_variable = {
				var = zex_independent_seats_support
				value = 0
				compare = greater_than
			}
		}
		subtract_from_variable = {
			var = zex_independent_seats_support
			value = 1
		}
		add_to_variable = {
			var = zex_independent_seats_opposition
			value = 1
		}
		add_to_variable = {
			var = ZEX_temp_var_opposition_increase
			value = 1
		}
	}
	while_loop_effect = {
		limit = {
			check_variable = {
				var = ZEX_temp_var_opposition_increase
				value = 150
				compare = less_than
			}
			check_variable = {
				var = zex_harmony_seats_support
				value = 0
				compare = greater_than
			}
		}
		subtract_from_variable = {
			var = zex_harmony_seats_support
			value = 1
		}
		add_to_variable = {
			var = zex_harmony_seats_opposition
			value = 1
		}
		add_to_variable = {
			var = ZEX_temp_var_opposition_increase
			value = 1
		}
	}
}