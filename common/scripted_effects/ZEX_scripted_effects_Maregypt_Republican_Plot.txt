#################################################
# MAREGYPT REPUBLICAN AGITATION RELATED EFFECTS #
#################################################
# start / end
ZEX_activate_republican_agitation = {
	custom_effect_tooltip = ZEX_Activate_Agitation_tt #Only for decision contexts
	hidden_effect = {
		# Control variables
		set_variable = {
			ZEX_MGY_LOWER_UNREST_GLOBAL_COST = 15
		}
		set_variable = {
			ZEX_MGY_LEGITIMACY = 95
		}
		set_variable = {
			ZEX_MGY_UNREST_EFFECTS_INTERVALLS = 28
		}
		set_variable = {
			ZEX_MGY_UNREST_EFFECTS_IMPACT = 5
		}
		set_variable = {
			ZEX_MGY_UNREST_COUNTER_COST = 5
		}
		set_variable = {
			ZEX_MGY_Actions_Taken = 0
		}
		set_variable = {
			ZEX_MGY_UNREST_REBELS_SUCCESS = 65
		}
		set_variable = {
			ZEX_MGY_UNREST_REBELS_NOTHING = 10
		}
		set_variable = {
			ZEX_MGY_UNREST_REBELS_ESCAPE = 25
		}
		set_variable = {
			ZEX_MGY_LEGITIMACY_INCREASE = 0.5
		}

		# Other defines
		set_country_flag = zex_has_republican_agitation
		ZEX_MGY_SET_BASE_ALIGNMENTS = yes
		ZEX_MGY_enable_state_unrest = yes
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_impact_dynmod
		}
	}
}

ZEX_deactivate_republican_agitation = {
	custom_effect_tooltip = ZEX_Deactivate_Agitation_tt
	hidden_effect = {
		clr_country_flag = zex_has_republican_agitation

		remove_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_impact_dynmod
		}
	}
}

# Flow Control
ZEX_MGY_SET_BASE_ALIGNMENTS = {
	set_variable = {
		var = ZEX_MGY_VAR_Sineighi_Alignment
		value = 52
	}
	set_variable = {
		var = ZEX_MGY_VAR_Kaneigh_Alignment
		value = 42
	}
	set_variable = {
		var = ZEX_MGY_VAR_Maneisrata_Alignment
		value = 30
	}
	set_variable = {
		var = ZEX_MGY_VAR_UpperMaregypt_Alignment
		value = 10
	}
	set_variable = {
		var = ZEX_MGY_VAR_Delta_Alignment
		value = 5
	}
	set_variable = {
		var = ZEX_MGY_VAR_Manephis_Alignment
		value = 26
	}
	set_variable = {
		var = ZEX_MGY_VAR_Somnambula_Alignment
		value = 1
	}
	set_variable = {
		var = ZEX_MGY_VAR_Eastdesert_Alignment
		value = 2
	}
	set_variable = {
		var = ZEX_MGY_VAR_Zush_Alignment
		value = 12
	}
	ZEX_MGY_GET_AVERAGE_UNREST = yes
	ZEX_MGY_UPDATE_LOCAL_UNREST_IMPACT = yes
}

ZEX_MGY_enable_state_unrest = {
	## Adds the state modifiers - SIneighi
	738 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_sineighi_dynmod
		}
	}
	## Adds the state modifiers - Mineisrata
	740 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_maneisrata_dynmod
		}
	}
	## Adds the state modifiers - Delta
	737 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_delta_dynmod
		}
	}
	744 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_delta_dynmod
		}
	}
	## Adds the state modifiers - Somnambula
	733 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_somnambula_dynmod
		}
	}
	## Adds the state modifiers - Desert
	731 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_eastdesert_dynmod
		}
	}
	732 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_eastdesert_dynmod
		}
	}
	## Adds the state modifiers - Manephis
	735 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_manephis_dynmod
		}
	}
	736 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_manephis_dynmod
		}
	}
	## Adds the state modifiers -  Upper Maregypt
	758 = { 
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_uppermaregypt_dynmod
		}
	}
	759 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_uppermaregypt_dynmod
		}
	}
	760 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_uppermaregypt_dynmod
		}
	}
	761 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_uppermaregypt_dynmod
		}
	}
	## Adds the state modifiers - Zush
	766 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_zush_dynmod
		}
	}
	770 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_zush_dynmod
		}
	}
	## Adds the state modifiers - Kaneigh
	763 = {
		add_dynamic_modifier = {
			modifier = ZEX_MGY_republican_agitation_kaneigh_dynmod
		}
	}	
	ZEX_MGY_UPDATE_LOCAL_UNREST_IMPACT = yes
}

ZEX_MGY_GET_AVERAGE_UNREST = {
	set_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = 0
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Sineighi_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Kaneigh_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Maneisrata_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_UpperMaregypt_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Delta_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Manephis_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Somnambula_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Eastdesert_Alignment
	}
	add_to_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = ZEX_MGY_VAR_Zush_Alignment
	}
	divide_variable = {
		var = ZEX_MGY_AVERAGE_UNREST
		value = 9
	}
	ZEX_MGY_UPDATE_REPUBLICAN_MODIFIER = yes
}

ZEX_MGY_UPDATE_LOCAL_UNREST_IMPACT = {
	set_variable = {
		var = ZEX_MGY_VAR_Sineighi_Alignment_negative
		value = ZEX_MGY_VAR_Sineighi_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Sineighi_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_Kaneigh_Alignment_negative
		value = ZEX_MGY_VAR_Kaneigh_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Kaneigh_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_Maneisrata_Alignment_negative
		value = ZEX_MGY_VAR_Maneisrata_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Maneisrata_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_UpperMaregypt_Alignment_negative
		value = ZEX_MGY_VAR_UpperMaregypt_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_UpperMaregypt_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_Delta_Alignment_negative
		value = ZEX_MGY_VAR_Delta_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Delta_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_Manephis_Alignment_negative
		value = ZEX_MGY_VAR_Manephis_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Manephis_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_Somnambula_Alignment_negative
		value = ZEX_MGY_VAR_Somnambula_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Somnambula_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_Eastdesert_Alignment_negative
		value = ZEX_MGY_VAR_Eastdesert_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Eastdesert_Alignment_negative
		value = -0.005
	}
	set_variable = {
		var = ZEX_MGY_VAR_Zush_Alignment_negative
		value = ZEX_MGY_VAR_Zush_Alignment
	}
	multiply_variable = {
		var = ZEX_MGY_VAR_Zush_Alignment_negative
		value = -0.005
	}
}

ZEX_MGY_UPDATE_REPUBLICAN_MODIFIER = {
	set_variable = {
		var = ZEX_MGY_AVERAGE_UNREST_NEGATIVE
		value = ZEX_MGY_AVERAGE_UNREST
	}
	multiply_variable = {
		var = ZEX_MGY_AVERAGE_UNREST_NEGATIVE
		value = -0.01
	}
	set_variable = {
		var = ZEX_MGY_AVERAGE_POLITICAL_IMPACT_UNREST
		value = ZEX_MGY_AVERAGE_UNREST
	}
	multiply_variable = {
		var = ZEX_MGY_AVERAGE_POLITICAL_IMPACT_UNREST
		value = -0.01
	}
}

ZEX_MGY_Increase_Unrest = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Delta_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Delta_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Delta_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Delta_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_delta_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Sineighi_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Sineighi_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Sineighi_Alignment  = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Sineighi_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_sineigh_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Maneisrata_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Maneisrata_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Maneisrata_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Maneisrata_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_maneisrata_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Manephis_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Manephis_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Manephis_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Manephis_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_manephis_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Desert_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Eastdesert_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Eastdesert_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Eastdesert_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_desert_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Somnambula_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Somnambula_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Somnambula_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Somnambula_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_somnambula_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_UpperMaregypt_protected_flag
					check_variable = {
						ZEX_MGY_VAR_UpperMaregypt_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_UpperMaregypt_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_UpperMaregypt_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_uppermaregypt_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Zush_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Zush_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Zush_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Zush_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_zush_unrest
		}
		10 = {
			modifier = {
				factor = 0
				OR = {
					has_country_flag = ZEX_MGY_Kaneigh_protected_flag
					check_variable = {
						ZEX_MGY_VAR_Kaneigh_Alignment > 99
					}
				}
			}
			add_to_variable = {
				ZEX_MGY_VAR_Kaneigh_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Kaneigh_Alignment
				max = 100
			}
			set_country_flag = zex_mgy_increased_kaneigh_unrest
		}
	}
	if = {
		limit = {
			NOT = {
				has_country_flag = ZEX_MGY_LIMIT_UNREST_TARGETS
			}
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = zex_mgy_increased_delta_unrest
						has_country_flag = ZEX_MGY_Delta_protected_flag
						check_variable = {
							ZEX_MGY_VAR_Delta_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Delta_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Delta_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = zex_mgy_increased_sineigh_unrest
						has_country_flag = ZEX_MGY_Sineighi_protected_flag
						check_variable = {
							ZEX_MGY_VAR_Sineighi_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Sineighi_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Sineighi_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = ZEX_MGY_Maneisrata_protected_flag
						has_country_flag = zex_mgy_increased_maneisrata_unrest
						check_variable = {
							ZEX_MGY_VAR_Maneisrata_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Maneisrata_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Maneisrata_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = ZEX_MGY_Manephis_protected_flag
						has_country_flag = zex_mgy_increased_manephis_unrest
						check_variable = {
							ZEX_MGY_VAR_Manephis_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Manephis_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Manephis_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = zex_mgy_increased_desert_unrest
						has_country_flag = ZEX_MGY_Desert_protected_flag
						check_variable = {
							ZEX_MGY_VAR_Eastdesert_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Eastdesert_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Eastdesert_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = ZEX_MGY_Somnambula_protected_flag
						has_country_flag = zex_mgy_increased_somnambula_unrest
						check_variable = {
							ZEX_MGY_VAR_Somnambula_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Somnambula_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Somnambula_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = ZEX_MGY_UpperMaregypt_protected_flag
						has_country_flag = zex_mgy_increased_uppermaregypt_unrest
						check_variable = {
							ZEX_MGY_VAR_UpperMaregypt_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_UpperMaregypt_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_UpperMaregypt_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = ZEX_MGY_Zush_protected_flag					
						has_country_flag = zex_mgy_increased_zush_unrest
						check_variable = {
							ZEX_MGY_VAR_Zush_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Zush_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Zush_Alignment
					max = 100
				}
			}
			10 = {
				modifier = {
					factor = 0
					OR = {
						has_country_flag = ZEX_MGY_Kaneigh_protected_flag
						has_country_flag = zex_mgy_increased_kaneigh_unrest
						check_variable = {
							ZEX_MGY_VAR_Kaneigh_Alignment > 99
						}
					}
				}
				add_to_variable = {
					ZEX_MGY_VAR_Kaneigh_Alignment = ZEX_MGY_UNREST_EFFECTS_IMPACT
				}
				clamp_variable = {
					var = ZEX_MGY_VAR_Kaneigh_Alignment
					max = 100
				}
			}
		}
	}
	clr_country_flag = zex_mgy_increased_kaneigh_unrest
	clr_country_flag = zex_mgy_increased_delta_unrest
	clr_country_flag = zex_mgy_increased_desert_unrest
	clr_country_flag = zex_mgy_increased_somnambula_unrest
	clr_country_flag = zex_mgy_increased_maneisrata_unrest
	clr_country_flag = zex_mgy_increased_manephis_unrest
	clr_country_flag = zex_mgy_increased_uppermaregypt_unrest
	clr_country_flag = zex_mgy_increased_sineigh_unrest
	clr_country_flag = zex_mgy_increased_zush_unrest
	ZEX_MGY_GET_AVERAGE_UNREST = yes
	ZEX_MGY_UPDATE_LOCAL_UNREST_IMPACT = yes
}

ZEX_MGY_DECREASE_UNREST = {
	random_list = {
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Delta_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Delta_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Delta_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Sineighi_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Sineighi_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Sineighi_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Maneisrata_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Maneisrata_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Maneisrata_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Manephis_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Manephis_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Manephis_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Eastdesert_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Eastdesert_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Eastdesert_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Somnambula_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Somnambula_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Somnambula_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_UpperMaregypt_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_UpperMaregypt_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_UpperMaregypt_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Zush_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Zush_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Zush_Alignment
				min = 0
			}
		}
		10 = {
			modifier = {
				factor = 0
				check_variable = {
					ZEX_MGY_VAR_Kaneigh_Alignment < 2
				}
			}
			subtract_from_variable = {
				ZEX_MGY_VAR_Kaneigh_Alignment = 2
			}
			clamp_variable = {
				var = ZEX_MGY_VAR_Kaneigh_Alignment
				min = 0
			}
		}
	}
	ZEX_MGY_GET_AVERAGE_UNREST = yes
	ZEX_MGY_UPDATE_LOCAL_UNREST_IMPACT = yes
}

#debug effect
ZEX_MGY_agitation_set_random_variable = {
	set_variable_to_random = {
		var = ZEX_MGY_VAR_Maneisrata_Alignment
		max = 100
		integer = yes
	}
	set_variable_to_random = {
		var = ZEX_MGY_VAR_Delta_Alignment
		max = 100
		integer = yes
	}
	set_variable_to_random = {
		var = ZEX_MGY_VAR_Kaneigh_Alignment
		max = 100
		integer = yes
	}
	set_variable_to_random = {
		var = ZEX_MGY_VAR_Somnambula_Alignment
		max = 100
		integer = yes
	}
	set_variable_to_random = {
		var = ZEX_MGY_VAR_Sineighi_Alignment
		max = 100
		integer = yes
	}
	set_variable_to_random = {
		var = ZEX_MGY_VAR_Zush_Alignment
		max = 100
		integer = yes
	}
	set_variable_to_random = {
		var = ZEX_MGY_VAR_Eastdesert_Alignment
		max = 100
		integer = yes
	}
	set_variable_to_random = {
		var = ZEX_MGY_VAR_UpperMaregypt_Alignment
		max = 100
		integer = yes
	}
	ZEX_MGY_GET_AVERAGE_UNREST = yes
	ZEX_MGY_UPDATE_LOCAL_UNREST_IMPACT = yes
}

# GUI-specific effects to show / hide the decisions

ZEX_MGY_unrest_gui_clear_state_selection_flags = {
	clr_country_flag = zex_mgy_unrest_selected_sineighi
	clr_country_flag = zex_mgy_unrest_selected_delta
	clr_country_flag = zex_mgy_unrest_selected_kaneigh
	clr_country_flag = zex_mgy_unrest_selected_maneisrata
	clr_country_flag = zex_mgy_unrest_selected_manephis
	clr_country_flag = zex_mgy_unrest_selected_somnambula
	clr_country_flag = zex_mgy_unrest_selected_easterndesert
	clr_country_flag = zex_mgy_unrest_selected_uppermaregypt
	clr_country_flag = zex_mgy_unrest_selected_zush
}