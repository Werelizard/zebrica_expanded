#################################
# TAG/COSMETIC RELATED TRIGGERS #
#################################
zxe_is_zebrica_tag = {
	OR = {
		tag = MGY
	}
}

zxe_is_maregypt_or_cosmetic_maregypt = {
	OR = {
		tag = MGY
	}
}

zxe_is_originally_maregypt_or_cosmetic_maregypt = {
	OR = {
		original_tag = MGY
	}
}

zxe_mgy_equestria_exists = {
	exists = EQS
	NOT = {
		EQS = {
			has_capitulated = yes
		}
	}
}

#################################
# Vizier                        #
#################################
zex_mgy_no_vizier_check = {
	NOT = {
		has_idea = ZEX_MGY_Shaa_Doof_idea
	}
}

#################################
# Focus Tree Related            #
#################################
zex_no_scripted_maregypt_civil_war = {
	custom_trigger_tooltip = {
		tooltip = zex_no_scripted_maregypt_civil_war_tt
		OR = {
			zxe_is_zebrica_tag = yes
			zxe_is_maregypt_or_cosmetic_maregypt = yes
		}
		NOT = {
			has_civil_war = yes
		}
		NOT = {
			has_country_flag = zex_mgy_did_scripted_civil_war
		}
	}
}

zex_mgy_has_republican_unrest = {
	custom_trigger_tooltip = {
		tooltip = zex_has_republican_agitation_tt
		has_country_flag = zex_has_republican_agitation
	}
}

zex_mgy_has_constitutional_crisis = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_has_constitutional_crisis_tt
		OR = {
			has_idea = ZEX_Unfinished_Constitution
		}
	}
}

zex_mgy_shaa_doof_dead = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_shaa_doof_dead_tt
		has_country_flag = zex_mgy_shaa_doof_dead_flag
	}
}

zex_mgy_has_a_vizier = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_has_a_vizier_tt
		NOT = {
			zex_mgy_no_vizier_check = yes
		}
	}
}

zex_mgy_diet_is_supportive = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_diet_is_supportive_tt
		check_variable = {
			zex_royal_diet_total_support >= 101
		}
	}
}

zex_mgy_khefer_in_power = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_khefer_in_power_tt
		OR = {
			has_country_leader = {
				ruling_only = yes
				name = "King Khefer"
			}
			has_idea = ZEX_MGY_king_khefer_idea
		}
	}
}

zex_mgy_khefer_not_in_power = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_khefer_not_in_power_tt
		NOT = {
			has_country_leader = {
				ruling_only = yes
				name = "King Khefer"
			}
		}
		NOT = {
			has_idea = ZEX_MGY_king_khefer_idea
		}
	}
}

#################################
# Political Unrest Related      #
#################################
zex_mgy_less_than_actions_threshold = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_less_than_actions_threshold_tt
		check_variable = {
			ZEX_MGY_Actions_Taken < ZEX_MGY_MAX_Actions_Taken
		}
	}
}

zex_mgy_no_action_in_kaneigh = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_kaneigh_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Kaneigh_protected_flag
				has_country_flag = ZEX_MGY_Kaneigh_arrests_flag
				has_country_flag = ZEX_MGY_Kaneigh_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_maneisrata = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_maneisrata_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Maneisrata_protected_flag
				has_country_flag = ZEX_MGY_Maneisrata_arrests_flag
				has_country_flag = ZEX_MGY_Maneisrata_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_zush = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_zush_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Zush_protected_flag
				has_country_flag = ZEX_MGY_Zush_arrests_flag
				has_country_flag = ZEX_MGY_Zush_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_uppermaregypt = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_uppermaregypt_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_UpperMaregypt_protected_flag
				has_country_flag = ZEX_MGY_UpperMaregypt_arrests_flag
				has_country_flag = ZEX_MGY_UpperMaregypt_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_sineighi = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_sineighi_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Sineighi_protected_flag
				has_country_flag = ZEX_MGY_Sineighi_arrests_flag
				has_country_flag = ZEX_MGY_Sineighi_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_manephis = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_manephis_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Manephis_propaganda_flag
				has_country_flag = ZEX_MGY_Manephis_arrests_flag
				has_country_flag = ZEX_MGY_Manephis_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_delta = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_delta_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Delta_protected_flag
				has_country_flag = ZEX_MGY_Delta_arrests_flag
				has_country_flag = ZEX_MGY_Delta_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_somnambula = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_somnambula_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Somnambula_protected_flag
				has_country_flag = ZEX_MGY_Somnambula_arrests_flag
				has_country_flag = ZEX_MGY_Somnambula_propaganda_flag
			}
		}
	}
}

zex_mgy_no_action_in_eastdesert = {
	custom_trigger_tooltip = {
		tooltip = zex_mgy_no_action_in_eastdesert_tt
		NOT = {
			OR = {
				has_country_flag = ZEX_MGY_Desert_protected_flag
				has_country_flag = ZEX_MGY_Desert_arrests_flag
				has_country_flag = ZEX_MGY_Desert_propaganda_flag
			}
		}
	}
}

zex_mgy_can_use_state_action = {
	check_variable = {
		var = ZEX_MGY_Actions_Taken
		value = ZEX_MGY_MAX_Actions_Taken
		compare = less_than
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_sineighi
		}
		zex_mgy_no_action_in_sineighi = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_maneisrata
		}
		zex_mgy_no_action_in_maneisrata = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_delta
		}
		zex_mgy_no_action_in_delta = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_manephis
		}
		zex_mgy_no_action_in_manephis = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_somnambula
		}
		zex_mgy_no_action_in_somnambula = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_easterndesert
		}
		zex_mgy_no_action_in_eastdesert = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_uppermaregypt
		}
		zex_mgy_no_action_in_uppermaregypt = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_zush
		}
		zex_mgy_no_action_in_zush = yes
	}
	if = {
		limit = {
			has_country_flag = zex_mgy_unrest_selected_kaneigh
		}
		zex_mgy_no_action_in_kaneigh = yes
	}
}
